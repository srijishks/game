<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width">
    <title>Butterfly</title>
    <script src="react.js"></script>
    <script src="react-dom.js"></script>
    <script src="browser.min.js"></script>
    <script src="jquery.min.js"></script>
    <script src="marked.min.js"></script>
    <script src="graph.js"></script>
    <link rel="stylesheet" href="styles.css">
    <style>
    

    </style>
  </head>
  <body>
  <div class="wrapper">
    <div id="content">
    	
    </div>
   </div>
    <script type="text/babel">

    	var map = {
				"0": {"100":1},
				"1": {"100":1},
				"2": {"100":1},
				"3": {"100":1},
				"4": {"100":1},
				"5": {"100":1},
				"6": {"100":1},
				"7": {"100":1},
				"8": {"100":1},
				"9": {"100":1},
				"10": {"1":1, "2":1, "11":1, "20":1, "19":1, "9":1},
				"11": {"2":1, "3":1, "12":1, "21":1, "20":1, "10":1},
				"12": {"3":1, "4":1, "13":1, "22":1, "21":1, "11":1},
				"13": {"4":1, "5":1, "14":1, "23":1, "22":1, "12":1},
				"14": {"5":1, "6":1, "15":1, "24":1, "23":1, "13":1},
				"15": {"6":1, "7":1, "16":1, "25":1, "24":1, "14":1},
				"16": {"7":1, "8":1, "17":1, "26":1, "25":1, "15":1},
				"17": {"100":1},
				"18": {"100":1},
				"19": {"9":1, "10":1, "20":1, "28":1, "27":1, "18":1},
				"20": {"10":1, "11":1, "21":1, "29":1, "28":1, "19":1},
				"21": {"11":1, "12":1, "22":1, "30":1, "29":1, "20":1},
				"22": {"12":1, "13":1, "23":1, "31":1, "30":1, "21":1},
				"23": {"13":1, "14":1, "24":1, "32":1, "31":1, "22":1},
				"24": {"14":1, "15":1, "25":1, "33":1, "32":1, "23":1},
				"25": {"15":1, "16":1, "26":1, "34":1, "33":1, "24":1},
				"26": {"100":1},
				"27": {"100":1},
				"28": {"19":1, "20":1, "29":1, "38":1, "37":1, "27":1},
				"29": {"20":1, "21":1, "30":1, "39":1, "38":1, "28":1},
				"30": {"21":1, "22":1, "31":1, "40":1, "39":1, "29":1},
				"31": {"22":1, "23":1, "32":1, "41":1, "40":1, "30":1},
				"32": {"23":1, "24":1, "33":1, "42":1, "41":1, "31":1},
				"33": {"24":1, "25":1, "34":1, "43":1, "42":1, "32":1},
				"34": {"25":1, "26":1, "35":1, "44":1, "43":1, "33":1},
				"35": {"100":1},
				"36": {"100":1},
				"37": {"27":1, "28":1, "38":1, "46":1, "45":1, "36":1},
				"38": {"28":1, "29":1, "39":1, "47":1, "46":1, "37":1},
				"39": {"29":1, "30":1, "40":1, "48":1, "47":1, "38":1},
				"40": {"30":1, "31":1, "41":1, "49":1, "48":1, "39":1},
				"41": {"31":1, "32":1, "42":1, "50":1, "49":1, "40":1},
				"42": {"32":1, "33":1, "43":1, "51":1, "50":1, "41":1},
				"43": {"33":1, "34":1, "44":1, "52":1, "51":1, "42":1},
				"44": {"100":1},
				"45": {"100":1},
				"46": {"37":1, "38":1, "47":1, "56":1, "55":1, "45":1},
				"47": {"38":1, "39":1, "48":1, "57":1, "56":1, "46":1},
				"48": {"39":1, "40":1, "49":1, "58":1, "57":1, "47":1},
				"49": {"40":1, "41":1, "50":1, "59":1, "58":1, "48":1},
				"50": {"41":1, "42":1, "51":1, "60":1, "59":1, "49":1},
				"51": {"42":1, "43":1, "52":1, "61":1, "60":1, "50":1},
				"52": {"43":1, "44":1, "53":1, "62":1, "61":1, "51":1},
				"53": {"100":1},
				"54": {"100":1},
				"55": {"45":1, "46":1, "56":1, "64":1, "63":1, "54":1},
				"56": {"46":1, "47":1, "57":1, "65":1, "64":1, "55":1},
				"57": {"47":1, "48":1, "58":1, "66":1, "65":1, "56":1},
				"58": {"48":1, "49":1, "59":1, "67":1, "66":1, "57":1},
				"59": {"49":1, "50":1, "60":1, "68":1, "67":1, "58":1},
				"60": {"50":1, "51":1, "61":1, "69":1, "68":1, "59":1},
				"61": {"51":1, "52":1, "62":1, "70":1, "69":1, "60":1},
				"62": {"100":1},
				"63": {"100":1},
				"64": {"55":1, "56":1, "65":1, "74":1, "73":1, "63":1},
				"65": {"56":1, "57":1, "66":1, "75":1, "74":1, "64":1},
				"66": {"57":1, "58":1, "67":1, "76":1, "75":1, "65":1},
				"67": {"58":1, "59":1, "68":1, "77":1, "76":1, "66":1},
				"68": {"59":1, "60":1, "69":1, "78":1, "77":1, "67":1},
				"69": {"60":1, "61":1, "70":1, "79":1, "78":1, "68":1},
				"70": {"61":1, "62":1, "71":1, "80":1, "79":1, "69":1},
				"71": {"100":1},
				"72": {"100":1},
				"73": {"100":1},
				"74": {"100":1},
				"75": {"100":1},
				"76": {"100":1},
				"77": {"100":1},
				"78": {"100":1},
				"79": {"100":1},
				"80": {"100":1}

				},
			    graph = new Graph(map);
  			    var map2 = jQuery.extend({}, map);
			    var deletedItem = [];

			   
			   /**************************************************************************/
			 
				var PoochaAvatar = React.createClass({
				  render: function() {
				    return (
				      <span className="butterfly" ></span>
							
				    );
				  }
				});

			var MainDom = React.createClass({
				
				 getInitialState: function() {
			     	return {initnode: 40, showmsg : ""};
				},
				handleClick: function(j, i, selnode) {
					 try
   						 {
					if(j!=i){
					  	delete map[j];
					  	deletedItem.push(j);
						$("#"+j).addClass("clicked");
					    var shortPath = graph.findShortestPath(i, '100');
					    var newVal = shortPath[1];
						var msg = (newVal==100)?"tryagain":"or reset";
						this.setState({initnode: newVal, showmsg : msg});
					}

					}catch(error)
    						{	//If error? Try again
    							//this.resetOrTryAgain();	
    							this.successMsg();	
    							
    						}

			    },
			  resetOrTryAgain: function(){ 
				   	var item;
				 	for (var i = 0; i < deletedItem.length; i++) {
				 			item = deletedItem[i];
						    (function(itemin) {
						         map[itemin] = map2[itemin];
						    })(item);

						};
				
				  $(".circle").removeClass("clicked");
				  this.setState({initnode: 40,  showmsg: ""});
				 
				 this.componentDidMount();	
				
			  },
			 
			  componentDidMount: function(){ 
			  	var rand;
	   			for (var k = 0; k < 10; k++) { 
				 	rand = Math.floor((Math.random() * 80) );
				 	if(rand!=40){
					 	delete map[rand];
					 	deletedItem.push(rand);
					 	$("#"+rand).addClass("clicked");
				 	}
			 	}
			  },
			  successMsg: function(){
		 		this.setState({initnode: 40, showmsg : "Congratz ;)"});
		 	},
			  render: function() {
				  var indents = [];
				  var nodes, presence;
				  var selnode = this.state.initnode;
				  var showmsg = this.state.showmsg;

				  for (var i = 0; i < 81; i++) {
					 var handleClick = this.handleClick.bind(this, i, selnode);
				
						if(i%9==0){
							if(i%18==0){
								indents.push(<div onClick={handleClick}  className="circle nextRowleft " key={i} id={i} >{ selnode== i ? <PoochaAvatar ></PoochaAvatar> : null}</div>);
							}else{
							  indents.push(<div onClick={handleClick}  className="circle nextRow " key={i} id={i}>{ selnode== i ? <PoochaAvatar ></PoochaAvatar> : null}</div>);
							  }
						}else{
						
								 indents.push(<div onClick={handleClick} className="circle " key={i} id={i}>{ selnode== i ? <PoochaAvatar ></PoochaAvatar> : null}</div>);
							
						}
					}

				    return (
				     <div className="main" ><div className="submain" ><div className="newgame " onClick={this.resetOrTryAgain}>Click here for new game {showmsg}</div>{indents}</div></div>
				    );
			  	}
			});

			

			

	ReactDOM.render(<MainDom initnode="27"/>, content);
     
    </script>

   
  </body>
</html>

<!-- 


-->


